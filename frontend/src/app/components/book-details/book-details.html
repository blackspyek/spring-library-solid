<div
  class="relative w-full max-w-[800px] bg-[color:var(--search-bar-catalog)] rounded-xl shadow-2xl flex flex-col md:flex-row max-h-[90vh] md:max-h-none overflow-y-auto md:overflow-visible"
>
  <button
    (click)="close()"
    class="absolute top-3 right-3 z-10 text-[color:var(--base-gray-darker-catalog)] transition-colors p-2 bg-[color:var(--bg-x)] rounded-full md:bg-transparent md:p-0 cursor-pointer hover:bg-gray-100 md:hover:bg-transparent"
  >
    <mat-icon fontIcon="close"></mat-icon>
  </button>

  <div
    class="w-full md:w-[40%] flex items-start justify-center p-4 md:p-6 bg-[color:var(--mobile-bg:)] md:bg-transparent"
  >
    <div
      class="shadow-lg rounded-lg overflow-hidden w-[160px] h-[240px] md:w-[200px] md:h-[300px] relative flex-shrink-0"
    >
      <img [ngSrc]="data.imageUrl" [alt]="data.title" fill priority class="object-cover" />
    </div>
  </div>

  <div
    class="w-full md:w-[60%] p-6 md:p-8 flex flex-col text-[color:var(--base-gray-darker-catalog)]"
  >
    <h2 class="text-2xl md:text-3xl font-bold mb-1 md:mb-0 leading-tight">{{ data.title }}</h2>
    <h3
      class="text-base md:text-lg font-semibold mb-3 md:mb-1 text-[color:var(--base-gray-darker-catalog)]"
    >
      {{ data.author }}
    </h3>

    <div class="text-sm space-y-1 mb-4 md:mb-6">
      <p>
        Wydawnictwo: <span class="font-medium">{{ data.publisher || 'Brak danych' }}</span>
      </p>
      <p>
        Liczba stron: <span class="font-medium">{{ data.pageCount || '---' }}</span>
      </p>
    </div>

    <p class="text-sm leading-relaxed mb-6 md:mb-8 flex-grow">
      {{ data.description || 'Brak opisu dla tej pozycji.' }}
    </p>

    <div class="mt-auto">
      <p
        class="text-xs mb-3 md:mb-2 w-full md:max-w-[260px] leading-snug text-[color:var(--base-gray-darker-catalog)] break-normal whitespace-normal opacity-80"
      >
        {{
          data.libraryLocation || 'Miejska Biblioteka Publiczna im. H. Łopacińskiego Filia nr 12'
        }}
      </p>

      <div class="flex items-center justify-between mt-2 pt-2 md:border-0">
        <div class="flex items-center gap-2">
          <span
            class="w-2.5 h-2.5 rounded-full"
            [ngClass]="{
              'bg-[color:var(--availability-green)]': data.status === 'AVAILABLE',
              'bg-[color:var(--availability-red)]':
                data.status === 'RENTED' || data.status === 'LOST',
              'bg-[color:var(--availability-orange)]': data.status === 'MAINTENANCE',
            }"
          >
          </span>
          <span class="text-xs font-bold whitespace-nowrap">
            {{ getStatusLabel(data.status) }}
          </span>
        </div>

        <button
          class="ml-2 px-4 py-1.5 rounded bg-[color:var(--search-bar-catalog)] text-[color:var(--base-blue-lighter-catalog)] border border-[color:var(--base-blue-lighter-catalog)] text-xs font-bold uppercase tracking-wider hover:bg-[color:var(--hover-reserve)] transition-colors whitespace-nowrap cursor-pointer"
        >
          ZAREZERWUJ
        </button>
      </div>
    </div>
  </div>
</div>
